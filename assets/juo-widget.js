function C(a,s){typeof a=="string"&&(a=a.replace(".",""));let l="";const t=/\{\{\s*(\w+)\s*\}\}/,p=s||"${{amount}}";function n(i,u){return typeof i>"u"?u:i}function e(i,u,r,o){if(u=n(u,2),r=n(r,","),o=n(o,"."),isNaN(i)||i==null)return 0;i=(i/100).toFixed(u);const m=i.split("."),h=m[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+r),f=m[1]?o+m[1]:"";return h+f}switch(p.match(t)[1]){case"amount":l=e(a,2);break;case"amount_no_decimals":l=e(a,0);break;case"amount_with_comma_separator":l=e(a,2,".",",");break;case"amount_no_decimals_with_comma_separator":l=e(a,0,".",",");break;case"amount_with_apostrophe_separator":l=e(a,2,"'",".");break}return p.replace(t,l)}function M(){function a(n,e,i){return n.innerHTML='<span class="money">'+C(e,i)+"</span>"}function s(n,e){return n.sellingPlans.find(i=>i.id===Number(e))}function l(n){let e=n.querySelector('input[name="selling_plan"]');return e||(e=document.createElement("input"),e.type="hidden",e.name="selling_plan",n.append(e)),e}function t(n,e,i){const r=Array.from(document.querySelectorAll('form[action$="/cart/add"]')).map(l),o=document.querySelector("#juo-subscription-widget"),m=o.querySelector('[part="subscription-price"]'),h=o.querySelector('[part="price price--base"]'),f=o.querySelector('[part="compare-price"]'),y=o.querySelector('[part="select"]');function w(){return o.querySelector('input[name="mode"]:checked').value}function q(){return w()==="otp"?"":o.querySelector("select").value}function b(){const d=q();r.forEach(c=>{c.value=d})}function E(){const c=new URL(window.location.href).searchParams.get("variant")||e;return n.find(({id:g})=>g==c)||n.find(Boolean)}function L(d,c){const g=o.querySelector('[data-ref="save"]');if(o.querySelector(".j-save"),g){const _=c/d*100;g.innerHTML=100-Math.round(_)}}function P(){const d=E(),c=s(d,y.value);c.comparePrice>c.price&&L(c.comparePrice,c.price),a(h,d.price,i),a(m,c.price,i),c.price<c.comparePrice&&d.price!==c.price?a(f,c.comparePrice,i):f.innerHTML=""}function S(){b(),P()}S(),document.addEventListener("change",S),y.addEventListener("change",()=>{o.querySelector('input[name="mode"][value="subscription"]').click()})}if(window.Shopify!=null){let n=function(){var o;const[e,i,u,r]=JSON.parse(((o=document.getElementById("juo-subscription-widget-data"))==null?void 0:o.innerText)??"[]");t(e,i,u)};var p=n;document.readyState==="complete"||document.readyState==="loaded"||document.readyState==="interactive"?n():document.addEventListener("DOMContentLoaded",n)}}function j(){const a=document.querySelector("#juo-subscription-widget"),s=document.querySelector(".j-subscription"),l=document.querySelector(".j-otp"),t=a.querySelector(".j-subscription-details");function p(){return a.querySelector('input[name="mode"]:checked').value==="subscription"}let n=p();t.style.height=n?"auto":"0",t.style.overflow="hidden";function e(){const r=getComputedStyle(t).height;t.style.height="auto";const o=getComputedStyle(t).height;t.style.height=r,getComputedStyle(t).height,requestAnimationFrame(function(){t.style.height=o})}function i(){const r=getComputedStyle(t).height;t.style.height=r,getComputedStyle(t).height,requestAnimationFrame(function(){t.style.height="0"})}function u(){const r=p();s.classList[r?"add":"remove"]("active"),l.classList[r?"remove":"add"]("active"),r!==n&&(n=r,r?e():i())}t.style.transition="height 300ms ease-in-out",u(),a.addEventListener("change",u),t.addEventListener("transitionend",function(){Number.parseFloat(t.style.height)>.1&&(t.style.height="auto")})}function v(){if(window.Shopify!=null){let s=function(){var l;JSON.parse(((l=document.getElementById("juo-subscription-widget-data"))==null?void 0:l.innerText)??"[]"),M(),j()};var a=s;document.readyState==="complete"||document.readyState==="loaded"||document.readyState==="interactive"?s():document.addEventListener("DOMContentLoaded",s)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",v):v();
